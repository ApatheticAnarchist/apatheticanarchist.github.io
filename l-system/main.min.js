console&&"function"===typeof console.log||((window.console={}).log=function(){});
var g={koch:{d:{F:"F-F++F-F".split("")},a:{F:1},b:{"+":Math.PI/3,"-":-Math.PI/3},start:"F++F++F".split(""),e:function(a){a.translate(Math.floor(b/2)+0.5,3.5);a.rotate(-Math.PI/6);c=1.5},c:5},koch_90:{d:{F:"F-F+F+F-F".split("")},a:{F:1},b:{"+":Math.PI/2,"-":-Math.PI/2},start:["F"],e:function(a){a.translate(b-0.5,3.5);a.rotate(Math.PI/2);c=3},c:5,f:1},dragon:{d:{X:["X","+","Y","F"],Y:["F","X","-","Y"]},a:{F:1},b:{"+":Math.PI/2,"-":-Math.PI/2},start:["F","X"],e:function(a){a.translate(Math.floor(b/4)+
0.5,Math.floor(3*e/4)+0.5);c=3},c:13,f:5},sierpinski:{d:{F:"F-G+F+G-F".split(""),G:["G","G"]},a:{F:1,G:1},b:{"+":2*Math.PI/3,"-":-2*Math.PI/3},start:["F","-","G","-","G"],e:function(a){a.translate(Math.floor(b/2)+0.5,3.5);a.rotate(Math.PI/6);c=6},c:6},sierpinski_hex:{d:{F:["G","-","F","-","G"],G:["F","+","G","+","F"]},a:{F:1,G:1},b:{"+":-Math.PI/3,"-":Math.PI/3},start:["F"],e:function(a){a.translate(Math.floor(b/2)+0.5,3.5);f.c%2?a.rotate(-Math.PI/6):a.rotate(Math.PI/6);c=1.5},c:8,f:3},levy:{d:{F:"+F--F+".split("")},
a:{F:1},b:{"+":Math.PI/4,"-":-Math.PI/4},start:["F"],e:function(a){a.translate(Math.floor(b/4)+0.5,Math.floor(e/4)+0.5);a.rotate(-Math.PI/2);c=5},c:12,f:6}},f,j={koch:"Koch Snowflake",koch_90:"Quadratic Koch Curve",dragon:"Dragon Curve",sierpinski:"Sierpinski 1",sierpinski_hex:"Sierpinski 2",levy:"L\u00e9vy C Curve"},k,b,e,c,l,m,n,q,r="",s=[],t=[],u=!1,v=[],w=!1,x,y,z,A,B,C;x=function(a){(f=g[a])?y(f.start,0,f.c,function(){z(!0)}):B("System not found")};
y=function(a,d,h,p){t=a.slice(0);v.push(t.length);if(d>=h)p(t);else{for(l=t.length;0<=l;l--)r=t[l],f.d.hasOwnProperty(r)&&(s=f.d[r].slice(0),s.unshift(l,1),t.splice.apply(t,s));w=setTimeout(function(){y(t,++d,h,p)},25)}};z=function(a){q.save();f.e(q);q.beginPath();q.moveTo(0,0);A(0,t.length,a,function(){q.restore();if(!a){var d=q.createLinearGradient(0,0,0,e);d.addColorStop(0,"#f30");d.addColorStop(0.5,"#ff0");d.addColorStop(1,"#3f0");q.strokeStyle=d;q.fillStyle=d;q.fill()}})};
A=function(a,d,h,p){a<d?(r=t[a],f.a.hasOwnProperty(r)?(h&&(q.beginPath(),q.moveTo(0,0)),q.lineTo(0,c*f.a[r]),q.translate(0,c*f.a[r]),h&&(q.stroke(),u=4)):f.b.hasOwnProperty(r)&&(q.rotate(f.b[r]),u=!1),f.f&&v.indexOf(a)>=f.f&&(u=400),h&&u?w=setTimeout(function(){A(++a,d,h,p)},u):A(++a,d,h,p)):p(h)};B=function(a){m.innerHTML=a};C=function(a){return function(){w&&clearTimeout(w);q.restore();q.restore();q.clearRect(0,0,b,e);v=[];x(a)}};
window.addEventListener("load",function(){b=800;e=440;m=document.getElementById("placeholder");n=document.createElement("canvas");m.innerHTML="";m.appendChild(n);if(n.getContext&&n.getContext("2d")){q=n.getContext("2d");n.width=b;n.height=e;for(var a in j)k=document.createElement("input"),k.type="button",k.value=j[a],m.parentNode.insertBefore(k,m),k.addEventListener("click",C(a))}else B("Unsupported browser")});window.addEventListener("unload",function(){w&&clearTimeout(w)});